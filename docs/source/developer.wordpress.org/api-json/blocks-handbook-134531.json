{
    "id": 134531,
    "date": "2021-03-09T08:38:22",
    "date_gmt": "2021-03-09T08:38:22",
    "guid": {
        "rendered": "https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-directory/"
    },
    "modified": "2024-10-30T16:55:31",
    "modified_gmt": "2024-10-30T16:55:31",
    "slug": "packages-block-directory",
    "status": "publish",
    "type": "blocks-handbook",
    "link": "https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-directory/",
    "title": {
        "rendered": "@wordpress/block-directory"
    },
    "content": {
        "rendered": "<p>Package used to extend editor with block directory features to search and install blocks.</p>\n<blockquote><p>\n  This package is meant to be used only with WordPress core. Feel free to use it in your own project but please keep in mind that it might never get fully documented.\n</p></blockquote>\n<h2>Installation</h2>\n<p>Install the module</p>\n<pre><code class=\"language-bash\">npm install @wordpress/block-directory --save\n</code></pre>\n<p><em>This package assumes that your code will run in an <strong>ES2015+</strong> environment. If you&#8217;re using an environment that has limited or no support for such language features and APIs, you should include <a href=\"https://github.com/WordPress/gutenberg/tree/HEAD/packages/babel-preset-default#polyfill\">the polyfill shipped in <code>@wordpress/babel-preset-default</code></a> in your code.</em></p>\n<h2>Usage</h2>\n<p>This package builds a standalone JS file. When loaded on a page with the block editor, it extends the block inserter to search for blocks from WordPress.org.</p>\n<p>To do this, it uses the <code>__unstableInserterMenuExtension</code>, a slot-fill area hooked into the block types list. When the user runs a search and there are no results currently installed, it fires off a request to WordPress.org for matching blocks. These are listed for the user to install with a one-click process that <a href=\"./src/store/actions.js#L49\">installs, activates, and injects the block into the post.</a> When the post is saved, if the block was not used, it will be <a href=\"./src/store/actions.js#L129\">silently uninstalled</a> to avoid clutter.</p>\n<p>See also the API endpoints for searching WordPress.org: <code>/wp/v2/block-directory/search</code>, and installing &amp; activating plugins: <code>/wp/v2/plugins/</code>.</p>\n<h2>Actions</h2>\n<p>The following set of dispatching action creators are available on the object returned by <code>wp.data.dispatch( 'core/block-directory' )</code>:</p>\n<p><!-- START TOKEN(Autogenerated actions|src/store/actions.js) --></p>\n<h3>addInstalledBlockType</h3>\n<p>Returns an action object used to add a block type to the &#8220;newly installed&#8221; tracking list.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>item</em> <code>Object</code>: The block item with the block id and name.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>clearErrorNotice</h3>\n<p>Sets the error notice to empty for specific block.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>blockId</em> <code>string</code>: The ID of the block plugin. eg: my-block</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>fetchDownloadableBlocks</h3>\n<p>Returns an action object used in signalling that the downloadable blocks have been requested and are loading.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>filterValue</em> <code>string</code>: Search string.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>installBlockType</h3>\n<p>Action triggered to install a block plugin.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>block</em> <code>Object</code>: The block item returned by search.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>boolean</code>: Whether the block was successfully installed &amp; loaded.</li>\n</ul>\n<h3>receiveDownloadableBlocks</h3>\n<p>Returns an action object used in signalling that the downloadable blocks have been updated.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>downloadableBlocks</em> <code>Array</code>: Downloadable blocks.</li>\n<li><em>filterValue</em> <code>string</code>: Search string.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>removeInstalledBlockType</h3>\n<p>Returns an action object used to remove a block type from the &#8220;newly installed&#8221; tracking list.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>item</em> <code>string</code>: The block item with the block id and name.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>setErrorNotice</h3>\n<p>Sets an error notice to be displayed to the user for a given block.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>blockId</em> <code>string</code>: The ID of the block plugin. eg: my-block</li>\n<li><em>message</em> <code>string</code>: The message shown in the notice.</li>\n<li><em>isFatal</em> <code>boolean</code>: Whether the user can recover from the error.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>setIsInstalling</h3>\n<p>Returns an action object used to indicate install in progress.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>blockId</em> <code>string</code>:</li>\n<li><em>isInstalling</em> <code>boolean</code>:</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Action object.</li>\n</ul>\n<h3>uninstallBlockType</h3>\n<p>Action triggered to uninstall a block plugin.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>block</em> <code>Object</code>: The blockType object.</li>\n</ul>\n<p><!-- END TOKEN(Autogenerated actions|src/store/actions.js) --></p>\n<h2>Selectors</h2>\n<p>The following selectors are available on the object returned by <code>wp.data.select( 'core/block-directory' )</code>:</p>\n<p><!-- START TOKEN(Autogenerated selectors|src/store/selectors.js) --></p>\n<h3>getDownloadableBlocks</h3>\n<p>Returns the available uninstalled blocks.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n<li><em>filterValue</em> <code>string</code>: Search string.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Array</code>: Downloadable blocks.</li>\n</ul>\n<h3>getErrorNoticeForBlock</h3>\n<p>Returns the error notice for a given block.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n<li><em>blockId</em> <code>string</code>: The ID of the block plugin. eg: my-block</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>string|boolean</code>: The error text, or false if no error.</li>\n</ul>\n<h3>getErrorNotices</h3>\n<p>Returns all block error notices.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Object</code>: Object with error notices.</li>\n</ul>\n<h3>getInstalledBlockTypes</h3>\n<p>Returns the block types that have been installed on the server in this session.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Array</code>: Block type items</li>\n</ul>\n<h3>getNewBlockTypes</h3>\n<p>Returns block types that have been installed on the server and used in the current post.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Array</code>: Block type items.</li>\n</ul>\n<h3>getUnusedBlockTypes</h3>\n<p>Returns the block types that have been installed on the server but are not used in the current post.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>Array</code>: Block type items.</li>\n</ul>\n<h3>isInstalling</h3>\n<p>Returns true if a block plugin install is in progress.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n<li><em>blockId</em> <code>string</code>: Id of the block.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>boolean</code>: Whether this block is currently being installed.</li>\n</ul>\n<h3>isRequestingDownloadableBlocks</h3>\n<p>Returns true if application is requesting for downloadable blocks.</p>\n<p><em>Parameters</em></p>\n<ul>\n<li><em>state</em> <code>Object</code>: Global application state.</li>\n<li><em>filterValue</em> <code>string</code>: Search string.</li>\n</ul>\n<p><em>Returns</em></p>\n<ul>\n<li><code>boolean</code>: Whether a request is in progress for the blocks list.</li>\n</ul>\n<p><!-- END TOKEN(Autogenerated selectors|src/store/selectors.js) --></p>\n<h2>Contributing to this package</h2>\n<p>This is an individual package that&#8217;s part of the Gutenberg project. The project is organized as a monorepo. It&#8217;s made up of multiple self-contained software packages, each with a specific purpose. The packages in this monorepo are published to <a href=\"https://www.npmjs.com/\">npm</a> and used by <a href=\"https://make.wordpress.org/core/\">WordPress</a> as well as other software projects.</p>\n<p>To find out more about contributing to this package or Gutenberg as a whole, please read the project&#8217;s main <a href=\"https://github.com/WordPress/gutenberg/tree/HEAD/CONTRIBUTING.md\">contributor guide</a>.</p>\n",
        "protected": false
    },
    "author": 0,
    "featured_media": 0,
    "parent": 134521,
    "menu_order": 244,
    "template": "",
    "meta": {
        "footnotes": ""
    },
    "class_list": [
        "post-134531",
        "blocks-handbook",
        "type-blocks-handbook",
        "status-publish",
        "hentry",
        "type-handbook"
    ],
    "revision_note": "",
    "jetpack_sharing_enabled": true,
    "_links": {
        "self": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/134531",
                "targetHints": {
                    "allow": [
                        "GET"
                    ]
                }
            }
        ],
        "collection": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook"
            }
        ],
        "about": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/types/blocks-handbook"
            }
        ],
        "version-history": [
            {
                "count": 11,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/134531/revisions"
            }
        ],
        "predecessor-version": [
            {
                "id": 147240,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/134531/revisions/147240"
            }
        ],
        "up": [
            {
                "embeddable": true,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/134521"
            }
        ],
        "wp:attachment": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/media?parent=134531"
            }
        ],
        "curies": [
            {
                "name": "wp",
                "href": "https://api.w.org/{rel}",
                "templated": true
            }
        ]
    }
}
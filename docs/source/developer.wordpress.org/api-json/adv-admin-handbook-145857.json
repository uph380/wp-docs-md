{
    "id": 145857,
    "date": "2023-03-28T04:02:42",
    "date_gmt": "2023-03-28T04:02:42",
    "guid": {
        "rendered": "https://developer.wordpress.org/advanced-administration/multisite/administration/"
    },
    "modified": "2024-11-25T18:04:06",
    "modified_gmt": "2024-11-25T18:04:06",
    "slug": "administration",
    "status": "publish",
    "type": "adv-admin-handbook",
    "link": "https://developer.wordpress.org/advanced-administration/multisite/administration/",
    "title": {
        "rendered": "Multisite Network Administration"
    },
    "content": {
        "rendered": "<p>Once you&#8217;ve <a href=\"https://developer.wordpress.org/advanced-administration/multisite/create-network/\">created a Multisite Network</a>, there are some additional things you might need to know about advanced administration, due to the additional complexity of a Multisite. Even if you\u2019re familiar with WordPress, the structure and behavior of Multisite Network Administration might seem confusing at first.</p>\n<h2 id=\"user-access-capabilities\">User Access &amp; Capabilities</h2>\n<p>By default, all users added to your network will have <em>subscriber</em> access to <strong>all sites</strong> of your network. To assign a different default role for users on individual sites, you need to use a plugin.</p>\n<p>The capabilities of the site administrator role are also reduced in a WordPress Network. Site admins cannot install new themes or plugins and cannot edit the profiles of users on their site. Only the Network Admin (aka Super Admin) has the ability to perform these tasks in a WordPress network.</p>\n<h2 id=\"permalinks-in-subfolder-installs\">Permalinks in\u00a0SubFolder Installs</h2>\n<p>While permalinks will continue to work, the main site (i.e. the first one created) will have an extra entry of <code>blog</code>, making your URLs appear like <code>domain.com/blog/YYYY/MM/POSTNAME</code>.</p>\n<p>This is by design, in order to prevent collisions with SubFolder installs. Currently there is no easy way to change it, as doing so prevents WordPress from auto-detecting collisions between your main site and any subsites. This will be addressed, and customizable, in a future version of WordPress.</p>\n<p>Also note that the <code>blog</code> prefix is not used for static pages which will be accessible directly under the base address, e.g. <code>domain.com/PAGENAME</code>. If you try to create a static page in the first site with the name of another existing site on the network, the page&#8217;s permalink will get a suffix (e.g. <code>domain.com/PAGENAME-2</code>). If you create a new site with the slug of an existing static page, the static page will not be reachable anymore. To prevent this, you can add the names of your static pages to the blacklist so that no site with that name can be created.</p>\n<h2 id=\"uploaded-file-path\">Uploaded File Path</h2>\n<p>Your first site on a fresh install will put uploaded files in the traditional location of <code>/wp-content/uploads/</code>, however all <em>subsequent</em>\u00a0sites on your network will be in the <code>/wp-content/uploads/sites/</code> folder, in their own subfolder based on the site number, designated by the database. These files will be accessible via that URL.</p>\n<p>This is a change from Multisite 3.0-3.4.2, where images of subsites were stored in <code>/wp-content/blogs.dir/</code> and were shown in https://example.com/files/ and https://example.com/sitename/files and so on. If you started with a Multisite install older than 3.5, it is <em>not</em> an error if your images show with the URL of <code>/files/</code>.</p>\n<p>Regardless of WP version, these locations cannot be changed by site admins. Only the network admin can make changes on the site settings page. It is not recommended that you change these without understanding how both the <code>ms-files.php</code> works in conjunction with your <code>.htaccess</code>, as it can easily become non-functional. If the <code>/files/</code> urls aren&#8217;t working, it&#8217;s indicative of a misconfigured .htaccess or httpd.conf file on your server.</p>\n<h2 id=\"plugins\">Plugins</h2>\n<p>Plugins now have additional flexibility, depending upon their implementation across the network. All plugins are installed on the network dashboard&#8217;s plugin page, and can be activated either per-site or for the entire network.</p>\n<ul>\n<li><strong>Site Specific Plugins:</strong> These plugins are activated from within the plugins page of a single specific site.\u00a0Some plugins (contact forms, for example) work best when they are single-site activated, so that they can store data and settings in that single site&#8217;s database tables, instead of the tables for the whole network.\u00a0WordPress Plugins to be single-site activated/deactivated are stored in the plugins\u00a0directory.</li>\n<li><strong>Network Plugins:</strong>\u00a0Network admins\u00a0may \u2018network activate&#8217; plugins in the Network Admin dashboard for plugins.\u00a0Once \u2018network activated&#8217;, plugins will become active in all sites. \u2018Network Activated&#8217; plugins are indicated as &#8220;Network Active&#8221; in\u00a0plugin lists in the dashboards of individual sites. Some plugins only function in a multisite environment when they are network activated.\u00a0WordPress Plugins that are Network Activated are also stored in the plugins directory.</li>\n<li><strong>Must-Use Plugins:</strong> Plugins to be used by all sites on the entire network may also be installed in the mu-plugins directory as single files, or a file to include a subfolder. Any files within a folder will not be read. These files are not activated or deactivated; if they exist, they are used. These plugins are hidden entirely from per-site plugin lists.</li>\n</ul>\n<p>Not all plugins in the repository will work in a multisite environment. Consult the plugin&#8217;s repository page or contact the developer for information about whether a specific plugin will function in a multisite network.</p>\n<p>If you would like single site administrators to be able to activate/deactivate site-specific plugins for their site, you need to enable the Plugins page for single\u00a0site administrators from the Network Admin&#8217;s Settings -&gt; Network Settings menu (&#8220;Menu Settings&#8221;).\u00a0Network Admins will always have access to the plugins of every site.\u00a0Administrators of a\u00a0single site will be able to activate and deactivate plugins that are not Network Activated, but will see the Network Activated plugins as &#8220;Network Active&#8221; with no options for deactivation or settings.</p>\n<p>There are plugins that will assist with mass activating/deactivating plugins for single sites.</p>\n<h2 id=\"themes\">Themes</h2>\n<p>All themes are installed for the entire network. If you edit the code of one theme, you edit it for all sites using that theme. You can install the plugin <a href=\"https://wordpress.org/plugins/wp-add-custom-css/\">WP Add Custom CSS</a> to allow each site to tweak their own CSS without affecting anyone else. Also, individual sites may use the Theme Customizer, and their settings will be stored only in the tables for their site.</p>\n<p>&#8220;Network Activating&#8221; a theme does not make it the active theme on each site, but merely makes it available to be activated on all individual sites. \u00a0To be available for activation in the dashboard of a single site, a theme must be either network activated or enabled in Network Admin \u2013 Edit Site \u2013 Themes tab. After a theme\u00a0has been activated in a\u00a0single site, it may be network deactivated without affecting the single site where it remains activated.</p>\n<p>By default, WordPress assigns the most recent &#8220;Twenty &#8230;&#8221; as the theme for all new sites. This can be customized by adding a line like <code>define('WP_DEFAULT_THEME', 'classic');</code> to your <code>wp-config.php</code> file, where \u2018classic&#8217; is replaced with the folder name of your theme.</p>\n<h2 id=\"categories-and-tags\">Categories and Tags</h2>\n<p>Global terms (i.e. sharing tags and categories between sites on the network) is not available in WordPress 3.0. You can use plugin to incorporate global tags on the portal/front page of the site or on specific pages or sites within the network to increase navigation based upon micro-categorized content.</p>\n<h2 id=\"content-sharing-between-sites\">Content Sharing Between Sites</h2>\n<p>The sites of a network are separate sites that don&#8217;t by default share content. Think of your network as a mini version of WordPress.com. There are several plugins which may help you share content between your sites, <a href=\"https://wordpress.org/plugins/network-posts-extended/\">like this one</a>.</p>\n<h2 id=\"switching-network-types\">Switching network types</h2>\n<p>It&#8217;s possible to switch between domain-based (sub-domain) and path-based (sub-directory) installations of Multisite. If you have had WordPress installed for longer than a month on a single site, and are attempting to activate that site into a network, you will be told to use <strong>Sub-domain</strong> sites. This is in order to ensure you don&#8217;t have conflicts between pages (i.e. example.com/pagename ) and sites (i.e. example.com/sitename ). If you are confident you will not have this issue, then you can change this after you finish the initial setup.</p>\n<p>In your <code>wp-config.php</code> file, you&#8217;ll want to change the define call for <code>SUBDOMAIN_INSTALL</code>: For a domain-based network (sub-domain install)</p>\n<pre><code>define( 'SUBDOMAIN_INSTALL', true );\n</code></pre>\n<p>For a path-based network (sub-directory install)</p>\n<pre><code>define( 'SUBDOMAIN_INSTALL', false );\n</code></pre>\n<p>You&#8217;ll also have to change your <code>.htaccess</code> to the new setup. You can go\u00a0to Network Admin \u2014 Settings \u2014 Network Setup to find the new <code>.htaccess</code> rules, or see below.</p>\n<p>Note that per the <a href=\"https://developer.wordpress.org/advanced-administration/multisite/prepare-network/#WordPress_Settings_Requirements\">Settings Requirements</a> you cannot switch from <strong>Sub-directory</strong> to <strong>Sub-domain</strong> when running on <code>127.0.0.1</code> or <code>localhost</code>. This can potentially cause an endless loop of reauth=1 on your root site due to cookie handling.</p>\n<h2 id=\"apache-virtual-hosts-and-mod-rewrite\">Apache Virtual Hosts and Mod Rewrite</h2>\n<p>To enable mod_rewrite to work within an Apache Virtual host you may need to set some options on the DocumentRoot.</p>\n<pre><code>&lt;VirtualHost *:80&gt;\n    ...\n    DocumentRoot /var/www/vhosts/wordpress\n    &lt;Directory /var/www/vhosts/wordpress&gt;\n        AllowOverride Fileinfo Options\n    &lt;/Directory&gt;\n    ...\n&lt;/VirtualHost&gt;\n</code></pre>\n<p>In some instances, you will need to add All to your AllowOverride for all htaccess rules to be honored.</p>\n<h2 id=\"htaccess-and-mod-rewrite\">.htaccess and Mod Rewrite</h2>\n<p>Unlike Single Site WordPress, which can work with &#8220;ugly&#8221; <a href=\"https://wordpress.org/documentation/article/customize-permalinks/\">Permalinks</a> and thus does not need Mod Rewrite, MultiSite <em>requires</em> its use to format URLs for your subsites. This necessitates the use of an .htaccess file, the format of which will be slightly different if you&#8217;re using SubFolders or SubDomains. The examples below are the standard .htaccess entries for WordPress SubFolders and SubDomains, when WordPress is installed in the root folder of your website. If you have WordPress in its own folder, you will need to change the value for RewriteBase appropriately.</p>\n<p>As a reminder, these are <strong>EXAMPLES</strong> and work in most, but not all, installs.</p>\n<p><strong>SubFolder Example</strong></p>\n<p>WordPress 3.0 through 3.4+</p>\n<pre><code># BEGIN WordPress\nRewriteEngine On\nRewriteBase /\nRewriteRule ^index.php$ - [L]\n\n# uploaded files\nRewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]\n\n# add a trailing slash to /wp-admin\nRewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]\n\nRewriteCond %{REQUEST_FILENAME} -f [OR]\nRewriteCond %{REQUEST_FILENAME} -d\nRewriteRule ^ - [L]\nRewriteRule ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]\nRewriteRule ^[_0-9a-zA-Z-]+/(.*\\.php)$ $1 [L]\nRewriteRule . index.php [L]\n# END WordPress\n</code></pre>\n<p>WordPress 3.5+ <em>ONLY use this if you STARTED Multisite on 3.5. If you upgraded from 3.4 to 3.5, use the old one!</em></p>\n<pre><code># BEGIN WordPress\nRewriteEngine On\nRewriteBase /\nRewriteRule ^index.php$ - [L]\n\n# add a trailing slash to /wp-admin\nRewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]\n\nRewriteCond %{REQUEST_FILENAME} -f [OR]\nRewriteCond %{REQUEST_FILENAME} -d\nRewriteRule ^ - [L]\nRewriteRule ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]\nRewriteRule ^([_0-9a-zA-Z-]+/)?(.*\\.php)$ $2 [L]\nRewriteRule . index.php [L]\n# END WordPress\n</code></pre>\n<p><strong>SubDomain Example</strong></p>\n<p>WordPress 3.0 through 3.4+</p>\n<pre><code># BEGIN WordPress\nRewriteEngine On\nRewriteBase /\nRewriteRule ^index.php$ - [L]\n\n# uploaded files\nRewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} -f [OR]\nRewriteCond %{REQUEST_FILENAME} -d\nRewriteRule ^ - [L]\nRewriteRule . index.php [L]\n# END WordPress\n</code></pre>\n<p>WordPress 3.5+</p>\n<pre><code># BEGIN WordPress\nRewriteEngine On\nRewriteBase /\nRewriteRule ^index.php$ - [L]\n\n# add a trailing slash to /wp-admin\nRewriteRule ^wp-admin$ wp-admin/ [R=301,L]\n\nRewriteCond %{REQUEST_FILENAME} -f [OR]\nRewriteCond %{REQUEST_FILENAME} -d\nRewriteRule ^ - [L]\nRewriteRule ^(wp-(content|admin|includes).*) $1 [L]\nRewriteRule ^(.*\\.php)$ wp/$1 [L]\nRewriteRule . index.php [L]\n# END WordPress\n</code></pre>\n<p><strong>Issues with old WPMU installs</strong></p>\n<p>If you installed WordPress MU in subfolder/subdirectory (not in root folder on your server via ftp) and you have problem with image library, where thumbnails and images do not show, you may need to manually add in rewrite rules for your file directories as follows:</p>\n<pre><code>RewriteRule ^([_0-9a-zA-Z-]+/)?siteN/files/(.+) wp-content/blogs.dir/N/files/$2 [L]\n</code></pre>\n<p>Put those <em>below</em> the normal call for uploaded files.</p>\n<h2 id=\"network-admin-link-location\">Network Admin Link Location</h2>\n<p>The Network Admin Link has moved with each major release of WordPress, as this is still a work in progress. Depending on which version of WordPress you are using, the link can be found in the following locations:</p>\n<ul>\n<li>3.0 \u2013 A menu called <em>Super Admin</em></li>\n<li>3.1 \u2013 On the admin header by &#8220;Howdy, YOURNAME.&#8221;</li>\n<li>3.2 \u2013 On the admin header, as a drop-down under &#8220;Howdy, YOURNAME.&#8221;</li>\n<li>3.3+ \u2013 On the admin bar, as a drop-down under your &#8220;My Sites&#8221;</li>\n</ul>\n<h2 id=\"domain-mapping\">Domain Mapping</h2>\n<p>Before WordPress 4.5, domain mapping requires a domain mapping plugin. In WordPress 4.5+, domain mapping is a native feature in Multisites. Learn how to use this feature at <a href=\"https://developer.wordpress.org/advanced-administration/multisite/domain-mapping/\">WordPress Multisite Domain Mapping</a></p>\n<h2 id=\"moving-multisite\">Moving Multisite</h2>\n<p>Moving Multisite is more complicated than moving a single install. Please read <a href=\"https://developer.wordpress.org/advanced-administration/upgrade/migrating/#moving-wordpress-multisite\">Moving WordPress Multisite</a> before continuing.</p>\n<h2 id=\"importing-into-a-network\">Importing into a Network</h2>\n<p>When you&#8217;ve created your WordPress Network for importing other sites, you need to look at the <a href=\"https://wordpress.org/documentation/article/migrating-multiple-blogs-into-wordpress-multisite/\">Migrating Multiple Blogs into WordPress Multisite</a> article.</p>\n<h2>Changelog</h2>\n<ul>\n<li>2022-10-25: Original content from <a href=\"https://wordpress.org/documentation/article/multisite-network-administration/\">Multisite Network Administration</a>.</li>\n</ul>\n",
        "protected": false
    },
    "author": 0,
    "featured_media": 0,
    "parent": 145853,
    "menu_order": 4,
    "template": "",
    "meta": {
        "footnotes": ""
    },
    "class_list": [
        "post-145857",
        "adv-admin-handbook",
        "type-adv-admin-handbook",
        "status-publish",
        "hentry",
        "type-handbook"
    ],
    "revision_note": "",
    "jetpack_sharing_enabled": true,
    "_links": {
        "self": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/adv-admin-handbook/145857",
                "targetHints": {
                    "allow": [
                        "GET"
                    ]
                }
            }
        ],
        "collection": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/adv-admin-handbook"
            }
        ],
        "about": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/types/adv-admin-handbook"
            }
        ],
        "version-history": [
            {
                "count": 5,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/adv-admin-handbook/145857/revisions"
            }
        ],
        "predecessor-version": [
            {
                "id": 155850,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/adv-admin-handbook/145857/revisions/155850"
            }
        ],
        "up": [
            {
                "embeddable": true,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/adv-admin-handbook/145853"
            }
        ],
        "wp:attachment": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/media?parent=145857"
            }
        ],
        "curies": [
            {
                "name": "wp",
                "href": "https://api.w.org/{rel}",
                "templated": true
            }
        ]
    }
}